<!DOCTYPE html>
<html>

<head>
  <title>Car config</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <script src="js/three.js-master/build/three.js"></script>
    <script src="js/three.js-master/examples/js/loaders/GLTFLoader.js"></script>
    <script src="js/three.js-master/examples/js/loaders/DRACOLoader.js"></script>
    <script src="js/three.js-master/examples/js/controls/OrbitControls.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <link type="text/css" rel="stylesheet" href="css/modal.css"  media="screen,projection"/>
      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>


    <div class="changerowcontainer">
    <div class="row" id="changerow">
        <canvas> </canvas> 
        <div class="col s4">
          <h4 class="body">Body color</h4>
          <button type="button" name="button" class="btn-small waves-effect waves-light green" onclick="changeColorBody('green')">Green</button>
          <button type="button" name="button" class="btn-small waves-effect waves-light  blue" onclick="changeColorBody('blue')">Blue</button>
          <button type="button" name="button" class="btn-small waves-effect waves-light  yellow" onclick="changeColorBody('yellow')">Yellow</button>
          <button type="button" name="button" class="btn-small waves-effect waves-light  red" onclick="changeColorBody('red')">Red</button>
        </div>
        <div class="col s4">
    
        <h4 class="rim">Rim color</h4>
        <button type="button" name="button" class="btn-small waves-effect waves-light  green" onclick="changeColorRim('green')">Green</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  blue" onclick="changeColorRim('blue')">Blue</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  yellow" onclick="changeColorRim('yellow')">Yellow</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  red" onclick="changeColorRim('red')">Red</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  black" onclick="changeColorRim('black')">black</button>
      </div>
      <div class="col s4">
    
        <h4 class="leather">Leather color </h4>
        <button type="button" name="button" class="btn-small waves-effect waves-light  white" style="color: black" onclick="changeColorLeather(0xffffff)">White</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  grey" onclick="changeColorLeather('grey')">Grey</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  black" onclick="changeColorLeather(0x7a797a)">Black</button>
      </div>
    <div class="col s4">
        <h4 class="details">Details color </h4>
        <button type="button" name="button" class="btn-small waves-effect waves-light  green" onclick="changeColorSmall('green')">Green</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light  blue" onclick="changeColorSmall('blue')">Blue</button>
      </div>
    </div>
  </div>
    <div id="langundoredobuttonscontainer">
      <div id="langundoredobuttons">
      <div class="col s4">
        <h4 class="language"></h4>
        <button type="button" name="button" class="btn-small waves-effect waves-light white" style="color: black" onclick="setLanguage('en')">English</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light white" style="color: black" onclick="setLanguage('sv')">Swedish</button>
      </div>
      <div class="col s4">
        <h4 class="undoredo"></h4>
        <button type="button" name="button" class="btn-small waves-effect waves-light white" style="color: black" onclick="undo()">Undo</button>
        <button type="button" name="button" class="btn-small waves-effect waves-light white" style="color: black" onclick="redo()">Redo</button>
      </div>
    </div>
  </div>
      <canvas id="c"></canvas>
    

</body>


  <script>
    var language;

    function getLanguage() {
      (localStorage.getItem('language') == null) ? setLanguage('en'): false;
      $.ajax({
        url: '/language/' + localStorage.getItem('language') + '.json',
        dataType: 'json',
        async: false,
        dataType: 'json',
        success: function (lang) {
          language = lang
        }
      });
    }

    function setLanguage(lang) {
      localStorage.setItem('language', lang);
      changeLang();
    }

    function changeLang() {
      getLanguage();
      $('.body').text(language.body);
      $('.rim').text(language.rim);
      $('.leather').text(language.leather);
      $('.details').text(language.details);
      $('.green').text(language.green);
      $('.blue').text(language.blue);
      $('.yellow').text(language.yellow);
      $('.red').text(language.red);
      $('.black').text(language.black);
      $('.grey').text(language.grey);
      $('.white').text(language.white);
      $('.language').text(language.language);
      $('.english').text(language.english);
      $('.swedish').text(language.swedish);
      $('.undo').text(language.undo);
      $('.redo').text(language.redo);
      $('.undoredo').text(language.undoredo);
    }
  </script>

  <script>
    // Load 3D Scene
    
    container = document.createElement('div');
		document.body.appendChild(container);

    var scene = new THREE.Scene();

    undoStack = [];
    redoStack = [];

    var carParts = {
      body: [],
      rims: [],
      glass: [],
      leather: [],
      rest: []
    };
    var carModel;

    // Load Camera Perspektive
    var camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 1, 20000);
    camera.position.set(-15, 9, 15);

    // Load a Renderer
    var renderer = new THREE.WebGLRenderer({
      alpha: false
    });
    renderer.setClearColor(0xE0E0E0);
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Load the Orbitcontroller
    var controls = new THREE.OrbitControls(camera, renderer.domElement);


    window.addEventListener('resize', function () {
      var width = window.innerWidth * .8;
      var height = window.innerHeight;
      renderer.setSize(width, height)
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
    });

    // Load Light
    var ambientLight = new THREE.AmbientLight(0xcccccc);
    scene.add(ambientLight);

    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(0, 1, 1).normalize();
    scene.add(directionalLight);
    // Optional: Provide a DRACOLoader instance to decode compressed mesh data


    // glTf 2.0 Loader
    var loader = new THREE.GLTFLoader();
    THREE.DRACOLoader.setDecoderPath('js/three.js-master/examples/js/libs/draco/');
    loader.setDRACOLoader(new THREE.DRACOLoader());

    // Optional: Pre-fetch Draco WASM/JS module, to save time while parsing.
    THREE.DRACOLoader.getDecoderModule();

    loader.load('ferrari.glb', function (gltf) {
      carModel = gltf.scene.children[0];
      carModel.traverse(function (child) {
        //if ( child.isMesh  ) {
        //child.material.envMap = envMap;
      });

      var object = gltf.scene;
      gltf.scene.scale.set(2, 2, 2);
      gltf.scene.position.x = 0; //Position (x = right+ left-)
      gltf.scene.position.y = 0.5; //Position (y = up+, down-)
      gltf.scene.position.z = 0; //Position (z = front +, back-)


   <!-- Trigger/Open The Modal -->
   <button id="myBtn" class="instructions"><i class="material-icons">help_outline</i></button>
  <!-- The Modal -->
  <div id="myModal" class="modal">
      <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <h4 class="modal-welcome">Welcome to Car Configurator</h4>
    <p class="modal-text">Here you have the chance to visualize your dream car. We have lots of colors to choose from. Click on the color you like best and check the car when it gets your newly chosen color.</p>
  </div>
  </div>

</div>
  <!-- Importing the modal script -->
  <script src="js/modal.js"></script>

  <!-- Importing the language script -->
  <script src="js/language.js"></script>

  <!-- importing the model -->
  <script src="js/car.js"></script>

</body>

</html>
